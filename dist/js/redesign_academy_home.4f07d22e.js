"use strict";(self.webpackChunkawwwards_new=self.webpackChunkawwwards_new||[]).push([[4430],{4393:(t,e,r)=>{r.d(e,{Z:()=>h});var c=r(6301),a=r(2316),n=r.n(a),o=r(5432),i=r(1415),s=r(3609),d=r(8030),u=r(8215),l=r(2406),_=r(9755);const h=n().View.extend({el:"body",events:{"click .js-add-cart-button":"_addCart","click .js-show-cart-button":"_showCart","click .js-remove-cart":"_removeCart","click .js-checkout":"_checkout"},lightbox:null,cart:null,initialize:function(){this._getCart(!1)},_getOrCreateLightbox:function(){var t=this;return null===this.lightbox&&(this.lightbox=new o.Z({add_close_button:!1,remove_after_close:!0,extra_content_class:"modal__content--sidebar",add_container:!1,close_callback:function(){t.lightbox=null}})),this.lightbox},_checkout:function(t){t.preventDefault(),t.stopPropagation();var e=t.currentTarget;try{this._sendGTMCheckoutEvent(e)}catch(t){console.log("Error GTM")}location.href=e.href},_sendGTMCheckoutEvent:function(t){if(s.Z.hasAccepted(d.r$)){var e=t.closest(".js-cart-details"),r=[],c=[];if(e.querySelectorAll(".js-product-details").forEach((function(t){var e=JSON.parse(t.dataset.model);r.push(e),c.push(e.item_id)})),r.length>0){let t={content_ids:[c],content_name:r[0].item_name,content_type:"product",value:r[0].price,currency:e.dataset.currency,content_category:r[0].item_category};i.Z.push({event:"begin_checkout",ecommerce:{items:r,fb_items:t}}),u.Z.log("begin_checkout",r)}}},_addCart:function(t){t.preventDefault(),t.stopPropagation();var e=t.currentTarget,r=e.dataset.id,a=this;this._loading(),_.post({url:c.Z.generate("add_product_cart",{uuid:r})}).done((function(){a._showCart(),a._addGTMEventAddToCart(e)}))},_addGTMEventAddToCart:function(t){if(s.Z.hasAccepted(d.r$)){var e=t.closest(".js-product-details");e&&(i.Z.push({event:"add_to_cart",ecommerce:this._getEcommercePart(e)}),u.Z.log("add_to_cart",this._getEcommercePart(e)))}},_addGTMEventRemoveFromCart:function(t){if(s.Z.hasAccepted(d.r$)){var e=t.closest(".js-product-details");e&&(i.Z.push({event:"remove_from_cart",ecommerce:this._getEcommercePart(e)}),u.Z.log("remove_from_cart",this._getEcommercePart(e)))}},_getEcommercePart:function(t){var e=JSON.parse(t.dataset.model);let r=[];return r.push(e),{items:r,fb_items:{content_ids:[e.item_id],content_name:e.item_name,content_type:"product",value:e.price,currency:t.dataset.currency,content_category:e.item_category}}},_removeCart:function(t){var e=t.currentTarget,r=e.dataset.id,a=this;this._loading(),_.post({url:c.Z.generate("tv_remove_product",{uuid:r})}).done((function(){a._showCart(),a._addGTMEventRemoveFromCart(e)}))},_getCart:function(t){var e=this;_.get({url:c.Z.generate("cart")}).done((function(r){e.cart=r,t&&e.openCart()}))},_loading:function(){this._getOrCreateLightbox().show((0,l.Hk)('<div class="cart-sidebar"><div class="box-loading style3"><div class="spinner"></div></div></div>'))},_showCart:function(){this._loading(),this._getCart(!0)},openCart:function(){this._getOrCreateLightbox().show((0,l.Hk)(this.cart));let t=document.querySelectorAll(".list-cart li").length,e=document.querySelector(".cart-count"),r=e.querySelector(".js-bubble");null===r&&(r=document.createElement("span"),r.classList.add("js-bubble"),e.appendChild(r)),r.innerHTML=t}})},4605:(t,e,r)=>{r(3783);var c=r(4393),a=r(8215);document.addEventListener("DOMContentLoaded",(function(){new c.Z,a.Z.track()}))}},t=>{t.O(0,[5716,188,9755,4409,7140],(()=>{return e=4605,t(t.s=e);var e}));t.O()}]);